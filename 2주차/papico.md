## 5장 더 좋은 액션 만들기

### 비즈니스 요구 사항과 설계를 맞추기
- 현재 요구 사항은 장바구니에 담긴 제품을 주문할때 무료 배송인지 확인하는 것  
- 현재 코드는 장바구니가 아닌 제품의 합계 + 가격 을 해서 확인하고 있음  
- 따라서 calc_total 이라는 함수를 통해, 장바구니의 합계 금액을 알아내는 함수의 중복을 제거할 수 있음  

### 코드의 라인 수와 좋은 코드의 관계
- 코드의 라인 수가 좋은 코드의 지표일 수 있음  
- 하지만 좋은 코드를 측정하는 지표는 라인 수 외에도 많음  
- 작은 함수는 이해하기 쉽고, 재사용에 용이함  

### 배열의 복사 비용
- 배열 복사는 배열의 변경보다 비용이 많이 드는 것은 사실  
- 하지만, GC 를 통한 메모리 최적화 처리가 됨  
- 복사본을 사용할 때의 많은 장점이 있음  
  - 책 후반부 6장, 7장에서 다룰 예정...?  

### 원칙: 암묵적 입력과 출력은 적수록 좋다
- 인자가 아닌 모든 입력은 암묵적 입력  
- 리턴값이 아닌 모든 출력은 암묵적 출력  
- 계산으로 만들기 위해 암묵적 입출력을 없애는 것을 액션에도 적용 가능  
- 액션을 계산으로 변경하지 못하더라도 암묵적 입출력을 줄이면 테스트가 용이해짐  

### 원칙: 설계는 엉켜있는 코드를 푸는 것이다
분리되어 있는 것을 조립하는 것은 쉽다. 오히려 잘 분리하는 방법을 찾기 어렵다.   

- 재사용하기 쉽다.  
- 유지보수하기 쉽다.  
- 테스트하기 쉽다.  

### add_item 함수 더 좋은 설계 적용 시키기
기존 코드에서는 add_item 함수는 cart, item 구조를 모두 알고 있었음.  
item 을 만들어 주는 함수를 별도로 분리하면, add_item 함수의 역할은 배열의 마지막에 신규 값을 추가해주는 역할만 하게 됨.  
즉 유틸리티 함수가 됨.  
**카피온 라이트**: 배열을 복사 후, 복사본을 조작해서 리턴하는 것  

